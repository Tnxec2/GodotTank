[gd_scene load_steps=5 format=2]

[ext_resource path="res://assets/ui/button_round_9.png" type="Texture" id=1]
[ext_resource path="res://assets/ui/button_square_9.png" type="Texture" id=2]
[ext_resource path="res://ui/buttons_font.tres" type="DynamicFont" id=3]

[sub_resource type="GDScript" id=1]
script/source = "extends Node2D

var button_selected = preload(\"res://assets/ui/button_square_9_selected.png\")
var button_normal = preload(\"res://assets/ui/button_square_9.png\")

onready var dif_easy_button = $CanvasLayer/Box/VBoxContainer/HBoxContainer/Difficulty/ContainerEasy/Background
onready var dif_medium_button = $CanvasLayer/Box/VBoxContainer/HBoxContainer/Difficulty/ContainerMedium/Background
onready var dif_hard_button = $CanvasLayer/Box/VBoxContainer/HBoxContainer/Difficulty/ContainerHard/Background
onready var size_small_button = $CanvasLayer/Box/VBoxContainer/HBoxContainer/GridSize/ContainerSmall/Background
onready var size_middle_button = $CanvasLayer/Box/VBoxContainer/HBoxContainer/GridSize/ContainerMiddle/Background
onready var size_big_button = $CanvasLayer/Box/VBoxContainer/HBoxContainer/GridSize/ContainerBig/Background

var difficulty = 0
var size = 0


func _ready():
	VisualServer.set_default_clear_color(Color(1,1,1)) # set background to white
	change_difficulty(0)
	change_size(0)


func change_difficulty(value):
	if value > 2 || value < 0:
		return
	difficulty = value
	dif_easy_button.texture = button_normal
	dif_medium_button.texture = button_normal
	dif_hard_button.texture = button_normal
	match(difficulty):
		0:
			dif_easy_button.texture = button_selected
		1:
			dif_medium_button.texture = button_selected
		2:
			dif_hard_button.texture = button_selected


func change_size(value):
	if value > 2 || value < 0:
		return
	size = value
	size_small_button.texture = button_normal
	size_middle_button.texture = button_normal
	size_big_button.texture = button_normal
	match(size):
		0:
			size_small_button.texture = button_selected
		1:
			size_middle_button.texture = button_selected
		2:
			size_big_button.texture = button_selected


func _on_ButtonEasy_pressed() -> void:
	change_difficulty(0)


func _on_ButtonMedium_pressed() -> void:
	change_difficulty(1)


func _on_ButtonHard_pressed() -> void:
	change_difficulty(2)


func _on_ButtonSmall_pressed() -> void:
	change_size(0)


func _on_ButtonMiddle_pressed() -> void:
	change_size(1)


func _on_ButtonBig_pressed() -> void:
	change_size(2)


func _on_NewGameButton_pressed() -> void:
	prints(\"difficulty\", difficulty, \"world_size\", size)
	G.world_size = size
	G.difficulty = difficulty
	get_tree().change_scene(\"res://Main.tscn\")


func _on_QuitButton_pressed() -> void:
	get_tree().quit()
"

[node name="StartScreen" type="Node2D"]
script = SubResource( 1 )

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="Box" type="NinePatchRect" parent="CanvasLayer"]
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
margin_left = -110.5
margin_top = -77.5
margin_right = 110.5
margin_bottom = 77.5
rect_min_size = Vector2( 100, 80 )
texture = ExtResource( 2 )
patch_margin_left = 4
patch_margin_top = 4
patch_margin_right = 4
patch_margin_bottom = 4

[node name="VBoxContainer" type="VBoxContainer" parent="CanvasLayer/Box"]
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
margin_left = -78.0
margin_top = -62.0
margin_right = 78.0
margin_bottom = 62.0
custom_constants/separation = 8

[node name="GameOver" type="CenterContainer" parent="CanvasLayer/Box/VBoxContainer"]
margin_right = 156.0
margin_bottom = 13.0

[node name="Label" type="Label" parent="CanvasLayer/Box/VBoxContainer/GameOver"]
margin_left = 64.0
margin_right = 92.0
margin_bottom = 13.0
custom_colors/font_color = Color( 0, 0, 0, 1 )
custom_fonts/font = ExtResource( 3 )
text = "Tank"
align = 1

[node name="HBoxContainer" type="HBoxContainer" parent="CanvasLayer/Box/VBoxContainer"]
margin_top = 21.0
margin_right = 156.0
margin_bottom = 88.0
custom_constants/separation = 16

[node name="Difficulty" type="VBoxContainer" parent="CanvasLayer/Box/VBoxContainer/HBoxContainer"]
margin_right = 70.0
margin_bottom = 67.0
rect_min_size = Vector2( 70, 0 )
custom_constants/separation = 2

[node name="Label" type="Label" parent="CanvasLayer/Box/VBoxContainer/HBoxContainer/Difficulty"]
margin_right = 70.0
margin_bottom = 13.0
custom_colors/font_color = Color( 0, 0, 0, 1 )
custom_fonts/font = ExtResource( 3 )
text = "Difficulty"

[node name="ContainerEasy" type="MarginContainer" parent="CanvasLayer/Box/VBoxContainer/HBoxContainer/Difficulty"]
margin_top = 15.0
margin_right = 70.0
margin_bottom = 31.0

[node name="Background" type="NinePatchRect" parent="CanvasLayer/Box/VBoxContainer/HBoxContainer/Difficulty/ContainerEasy"]
margin_right = 70.0
margin_bottom = 16.0
rect_min_size = Vector2( 40, 16 )
texture = ExtResource( 2 )
patch_margin_left = 4
patch_margin_top = 4
patch_margin_right = 4
patch_margin_bottom = 4

[node name="ButtonEasy" type="TextureButton" parent="CanvasLayer/Box/VBoxContainer/HBoxContainer/Difficulty/ContainerEasy/Background"]
anchor_right = 1.0
anchor_bottom = 1.0

[node name="Label" type="Label" parent="CanvasLayer/Box/VBoxContainer/HBoxContainer/Difficulty/ContainerEasy/Background"]
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
margin_left = -14.0
margin_top = -13.0
margin_right = 14.0
custom_colors/font_color = Color( 0, 0, 0, 1 )
custom_fonts/font = ExtResource( 3 )
text = "Easy"
align = 1
valign = 1

[node name="ContainerMedium" type="MarginContainer" parent="CanvasLayer/Box/VBoxContainer/HBoxContainer/Difficulty"]
margin_top = 33.0
margin_right = 70.0
margin_bottom = 49.0

[node name="Background" type="NinePatchRect" parent="CanvasLayer/Box/VBoxContainer/HBoxContainer/Difficulty/ContainerMedium"]
margin_right = 70.0
margin_bottom = 16.0
rect_min_size = Vector2( 40, 16 )
texture = ExtResource( 2 )
patch_margin_left = 4
patch_margin_top = 4
patch_margin_right = 4
patch_margin_bottom = 4

[node name="ButtonMedium" type="TextureButton" parent="CanvasLayer/Box/VBoxContainer/HBoxContainer/Difficulty/ContainerMedium/Background"]
anchor_right = 1.0
anchor_bottom = 1.0

[node name="Label" type="Label" parent="CanvasLayer/Box/VBoxContainer/HBoxContainer/Difficulty/ContainerMedium/Background"]
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
margin_left = -21.0
margin_top = -13.0
margin_right = 21.0
custom_colors/font_color = Color( 0, 0, 0, 1 )
custom_fonts/font = ExtResource( 3 )
text = "Medium"
align = 1
valign = 1

[node name="ContainerHard" type="MarginContainer" parent="CanvasLayer/Box/VBoxContainer/HBoxContainer/Difficulty"]
margin_top = 51.0
margin_right = 70.0
margin_bottom = 67.0

[node name="Background" type="NinePatchRect" parent="CanvasLayer/Box/VBoxContainer/HBoxContainer/Difficulty/ContainerHard"]
margin_right = 70.0
margin_bottom = 16.0
rect_min_size = Vector2( 40, 16 )
texture = ExtResource( 2 )
patch_margin_left = 4
patch_margin_top = 4
patch_margin_right = 4
patch_margin_bottom = 4

[node name="ButtonHard" type="TextureButton" parent="CanvasLayer/Box/VBoxContainer/HBoxContainer/Difficulty/ContainerHard/Background"]
anchor_right = 1.0
anchor_bottom = 1.0

[node name="Label" type="Label" parent="CanvasLayer/Box/VBoxContainer/HBoxContainer/Difficulty/ContainerHard/Background"]
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
margin_left = -17.5
margin_top = -13.0
margin_right = 17.5
custom_colors/font_color = Color( 0, 0, 0, 1 )
custom_fonts/font = ExtResource( 3 )
text = "Hard"
align = 1
valign = 1

[node name="GridSize" type="VBoxContainer" parent="CanvasLayer/Box/VBoxContainer/HBoxContainer"]
margin_left = 86.0
margin_right = 156.0
margin_bottom = 67.0
rect_min_size = Vector2( 70, 0 )
custom_constants/separation = 2

[node name="Label" type="Label" parent="CanvasLayer/Box/VBoxContainer/HBoxContainer/GridSize"]
margin_right = 70.0
margin_bottom = 13.0
custom_colors/font_color = Color( 0, 0, 0, 1 )
custom_fonts/font = ExtResource( 3 )
text = "World size"

[node name="ContainerSmall" type="MarginContainer" parent="CanvasLayer/Box/VBoxContainer/HBoxContainer/GridSize"]
margin_top = 15.0
margin_right = 70.0
margin_bottom = 31.0

[node name="Background" type="NinePatchRect" parent="CanvasLayer/Box/VBoxContainer/HBoxContainer/GridSize/ContainerSmall"]
margin_right = 70.0
margin_bottom = 16.0
rect_min_size = Vector2( 40, 16 )
texture = ExtResource( 2 )
patch_margin_left = 4
patch_margin_top = 4
patch_margin_right = 4
patch_margin_bottom = 4

[node name="ButtonSmall" type="TextureButton" parent="CanvasLayer/Box/VBoxContainer/HBoxContainer/GridSize/ContainerSmall/Background"]
anchor_right = 1.0
anchor_bottom = 1.0

[node name="Label" type="Label" parent="CanvasLayer/Box/VBoxContainer/HBoxContainer/GridSize/ContainerSmall/Background"]
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
margin_left = -17.5
margin_top = -13.0
margin_right = 17.5
custom_colors/font_color = Color( 0, 0, 0, 1 )
custom_fonts/font = ExtResource( 3 )
text = "40x40"
align = 1
valign = 1

[node name="ContainerMiddle" type="MarginContainer" parent="CanvasLayer/Box/VBoxContainer/HBoxContainer/GridSize"]
margin_top = 33.0
margin_right = 70.0
margin_bottom = 49.0

[node name="Background" type="NinePatchRect" parent="CanvasLayer/Box/VBoxContainer/HBoxContainer/GridSize/ContainerMiddle"]
margin_right = 70.0
margin_bottom = 16.0
rect_min_size = Vector2( 40, 16 )
texture = ExtResource( 2 )
patch_margin_left = 4
patch_margin_top = 4
patch_margin_right = 4
patch_margin_bottom = 4

[node name="ButtonMiddle" type="TextureButton" parent="CanvasLayer/Box/VBoxContainer/HBoxContainer/GridSize/ContainerMiddle/Background"]
anchor_right = 1.0
anchor_bottom = 1.0

[node name="Label" type="Label" parent="CanvasLayer/Box/VBoxContainer/HBoxContainer/GridSize/ContainerMiddle/Background"]
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
margin_left = -17.5
margin_top = -13.0
margin_right = 17.5
custom_colors/font_color = Color( 0, 0, 0, 1 )
custom_fonts/font = ExtResource( 3 )
text = "80x80"
align = 1
valign = 1

[node name="ContainerBig" type="MarginContainer" parent="CanvasLayer/Box/VBoxContainer/HBoxContainer/GridSize"]
margin_top = 51.0
margin_right = 70.0
margin_bottom = 67.0

[node name="Background" type="NinePatchRect" parent="CanvasLayer/Box/VBoxContainer/HBoxContainer/GridSize/ContainerBig"]
margin_right = 70.0
margin_bottom = 16.0
rect_min_size = Vector2( 40, 16 )
texture = ExtResource( 2 )
patch_margin_left = 4
patch_margin_top = 4
patch_margin_right = 4
patch_margin_bottom = 4

[node name="ButtonBig" type="TextureButton" parent="CanvasLayer/Box/VBoxContainer/HBoxContainer/GridSize/ContainerBig/Background"]
anchor_right = 1.0
anchor_bottom = 1.0

[node name="Label" type="Label" parent="CanvasLayer/Box/VBoxContainer/HBoxContainer/GridSize/ContainerBig/Background"]
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
margin_left = -24.5
margin_top = -13.0
margin_right = 24.5
custom_colors/font_color = Color( 0, 0, 0, 1 )
custom_fonts/font = ExtResource( 3 )
text = "120x120"
align = 1
valign = 1

[node name="HBoxContainer2" type="HBoxContainer" parent="CanvasLayer/Box/VBoxContainer"]
margin_top = 96.0
margin_right = 156.0
margin_bottom = 112.0
custom_constants/separation = 16

[node name="MarginContainer" type="MarginContainer" parent="CanvasLayer/Box/VBoxContainer/HBoxContainer2"]
margin_right = 70.0
margin_bottom = 16.0
rect_min_size = Vector2( 70, 0 )

[node name="NinePatchRectQuit" type="NinePatchRect" parent="CanvasLayer/Box/VBoxContainer/HBoxContainer2/MarginContainer"]
margin_right = 70.0
margin_bottom = 16.0
texture = ExtResource( 1 )
patch_margin_left = 4
patch_margin_top = 4
patch_margin_right = 4
patch_margin_bottom = 4

[node name="QuitButton" type="TextureButton" parent="CanvasLayer/Box/VBoxContainer/HBoxContainer2/MarginContainer/NinePatchRectQuit"]
anchor_right = 1.0
anchor_bottom = 1.0

[node name="Label" type="Label" parent="CanvasLayer/Box/VBoxContainer/HBoxContainer2/MarginContainer/NinePatchRectQuit"]
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
margin_left = -14.0
margin_top = -13.0
margin_right = 14.0
custom_colors/font_color = Color( 0, 0, 0, 1 )
custom_fonts/font = ExtResource( 3 )
text = "Quit"
align = 1
valign = 1

[node name="MarginContainer2" type="MarginContainer" parent="CanvasLayer/Box/VBoxContainer/HBoxContainer2"]
margin_left = 86.0
margin_right = 156.0
margin_bottom = 16.0

[node name="NinePatchRectNewGame" type="NinePatchRect" parent="CanvasLayer/Box/VBoxContainer/HBoxContainer2/MarginContainer2"]
margin_right = 70.0
margin_bottom = 16.0
rect_min_size = Vector2( 70, 16 )
texture = ExtResource( 1 )
patch_margin_left = 4
patch_margin_top = 4
patch_margin_right = 4
patch_margin_bottom = 4

[node name="NewGameButton" type="TextureButton" parent="CanvasLayer/Box/VBoxContainer/HBoxContainer2/MarginContainer2/NinePatchRectNewGame"]
anchor_right = 1.0
anchor_bottom = 1.0

[node name="Label" type="Label" parent="CanvasLayer/Box/VBoxContainer/HBoxContainer2/MarginContainer2/NinePatchRectNewGame"]
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
margin_left = -28.0
margin_top = -13.0
margin_right = 28.0
custom_colors/font_color = Color( 0, 0, 0, 1 )
custom_fonts/font = ExtResource( 3 )
text = "New Game"
align = 1
valign = 1

[connection signal="pressed" from="CanvasLayer/Box/VBoxContainer/HBoxContainer/Difficulty/ContainerEasy/Background/ButtonEasy" to="." method="_on_ButtonEasy_pressed"]
[connection signal="pressed" from="CanvasLayer/Box/VBoxContainer/HBoxContainer/Difficulty/ContainerMedium/Background/ButtonMedium" to="." method="_on_ButtonMedium_pressed"]
[connection signal="pressed" from="CanvasLayer/Box/VBoxContainer/HBoxContainer/Difficulty/ContainerHard/Background/ButtonHard" to="." method="_on_ButtonHard_pressed"]
[connection signal="pressed" from="CanvasLayer/Box/VBoxContainer/HBoxContainer/GridSize/ContainerSmall/Background/ButtonSmall" to="." method="_on_ButtonSmall_pressed"]
[connection signal="pressed" from="CanvasLayer/Box/VBoxContainer/HBoxContainer/GridSize/ContainerMiddle/Background/ButtonMiddle" to="." method="_on_ButtonMiddle_pressed"]
[connection signal="pressed" from="CanvasLayer/Box/VBoxContainer/HBoxContainer/GridSize/ContainerBig/Background/ButtonBig" to="." method="_on_ButtonBig_pressed"]
[connection signal="pressed" from="CanvasLayer/Box/VBoxContainer/HBoxContainer2/MarginContainer/NinePatchRectQuit/QuitButton" to="." method="_on_QuitButton_pressed"]
[connection signal="pressed" from="CanvasLayer/Box/VBoxContainer/HBoxContainer2/MarginContainer2/NinePatchRectNewGame/NewGameButton" to="." method="_on_NewGameButton_pressed"]
